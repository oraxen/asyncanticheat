# ============================================================================
# async_anticheat_api configuration
# Copy to .env and customize for your environment.
# ============================================================================

# --- Server ---
HOST=0.0.0.0
PORT=3002

# --- Auth ---
# Bearer token required for POST /ingest
INGEST_TOKEN=change_me_to_a_secure_random_string

# Bearer token required for POST /callbacks/findings (modules -> callback)
MODULE_CALLBACK_TOKEN=change_me_too

# Module healthcheck tick interval (seconds)
MODULE_HEALTHCHECK_INTERVAL_SECONDS=10

# --- Limits ---
# Max request body size in bytes (gzipped payload)
MAX_BODY_BYTES=10485760

# --- Database (Postgres) ---
# Used for metadata/indexes/findings only; raw data goes to S3.
DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# --- Object Storage (S3-compatible) ---
# Bucket where raw packet batches are stored.
S3_BUCKET=async-anticheat

# AWS region (or virtual region for S3-compatible stores)
S3_REGION=us-east-1

# Custom endpoint for S3-compatible storage (MinIO, Supabase Storage, R2, etc.)
# Leave unset for AWS S3.
# S3_ENDPOINT=https://your-minio.example.com

# Explicit credentials (optional; if unset, uses default AWS credential chain)
# S3_ACCESS_KEY=your_access_key
# S3_SECRET_KEY=your_secret_key

# Local storage fallback (used when S3_BUCKET is empty)
# LOCAL_STORE_DIR=./data/object_store

# --- Logging ---
RUST_LOG=info,async_anticheat_api=debug
